{% extends "base.html" %}

{% block title %}Enhanced FreshMart - Modern Grocery Shopping{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/enhancements.css') }}">
{% endblock %}

{% block content %}
<!-- Enhanced Hero Section with Modern Animations -->
<section class="hero-enhanced">
    <div class="container">
        <div class="hero-content-enhanced">
            <div class="hero-text" data-animate="fadeInUp">
                <h1 class="hero-title-enhanced">
                    <span class="title-word" style="animation-delay: 0.2s">ุจูุงูุฉ</span>
                    <span class="title-word" style="animation-delay: 0.4s">ุทุงุฒุฌุฉ</span>
                    <span class="title-word" style="animation-delay: 0.6s">ูููุตูุฉ</span>
                </h1>
                <p class="hero-subtitle-enhanced" data-animate="fadeInUp" style="animation-delay: 0.8s">
                    ุชุณูู ูู ูุฌููุนุชูุง ุงููุงุณุนุฉ ูู ุงูููุชุฌุงุช ุงูุทุงุฒุฌุฉ ูุงููุญูู ุนุงููุฉ ุงูุฌูุฏุฉ
                </p>
                <div class="hero-actions" data-animate="fadeInUp" style="animation-delay: 1s">
                    <a href="#categories" class="btn btn-enhanced btn-primary-enhanced btn-large">
                        ุชุณูู ุงูุขู
                        <span class="btn-icon">๐</span>
                    </a>
                    <a href="#deals" class="btn btn-enhanced btn-outline-enhanced btn-large">
                        ุงูุนุฑูุถ ุงูุฎุงุตุฉ
                        <span class="btn-icon">๐ฅ</span>
                    </a>
                </div>
            </div>
            <div class="hero-image-enhanced" data-animate="fadeInRight" style="animation-delay: 0.6s">
                <div class="hero-graphic-enhanced">
                    <div class="floating-icon" style="animation-delay: 0.2s">๐</div>
                    <div class="floating-icon" style="animation-delay: 0.4s">๐ฅ</div>
                    <div class="floating-icon" style="animation-delay: 0.6s">๐</div>
                    <div class="floating-icon" style="animation-delay: 0.8s">๐ฅ</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Enhanced Categories Section -->
<section class="categories-section-enhanced" id="categories">
    <div class="container">
        <div class="section-header-enhanced">
            <h2 class="section-title-enhanced" data-animate="fadeInUp">ุชุณูู ุจุญุณุจ ุงููุฆุฉ</h2>
            <p class="section-subtitle-enhanced" data-animate="fadeInUp" style="animation-delay: 0.2s">
                ุงุนุซุฑ ุนูู ูู ูุง ุชุญุชุงุฌู ูู ุฃูุณุงููุง ุงูููุธูุฉ
            </p>
        </div>
        
        <div class="categories-grid-enhanced">
            {% for category_key, category in categories.items() %}
            <a href="{{ url_for('category', category_name=category_key) }}" 
               class="category-card-enhanced" 
               data-animate="fadeInUp" 
               style="animation-delay: {{ loop.index * 0.1 }}s">
                <div class="category-icon-enhanced">{{ category.icon }}</div>
                <h3 class="category-name-enhanced">{{ category.name }}</h3>
                <div class="category-hover-enhanced">
                    <span class="shop-now-enhanced">ุชุณูู ุงูุขู โ</span>
                </div>
                <div class="category-badge">ุฌุฏูุฏ</div>
            </a>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Enhanced Featured Products -->
<section class="featured-section-enhanced" data-lazy-load>
    <div class="container">
        <div class="section-header-enhanced">
            <h2 class="section-title-enhanced">ููุชุฌุงุช ูููุฒุฉ</h2>
            <p class="section-subtitle-enhanced">ุฃุดูุฑ ููุชุฌุงุชูุง ูุฐุง ุงูุฃุณุจูุน</p>
        </div>
        
        <div class="products-grid-enhanced">
            {% for product in featured_products %}
            <div class="product-card product-card-enhanced" 
                 data-animate="fadeInUp" 
                 style="animation-delay: {{ loop.index * 0.1 }}s">
                
                <!-- Enhanced Product Badges -->
                <div class="product-badges-enhanced">
                    <div class="product-badge badge-featured">โญ ูููุฒ</div>
                    {% if product.discount > 0 %}
                    <div class="product-badge badge-discount">-{{ product.discount }}%</div>
                    {% endif %}
                </div>
                
                <!-- Enhanced Product Image -->
                <div class="product-image-enhanced">
                    <div class="skeleton skeleton-card" id="skeleton-{{ product.id }}"></div>
                    <span class="product-placeholder-enhanced">๐ฆ</span>
                    <div class="product-overlay-enhanced">
                        <button class="overlay-btn quick-view-btn" data-product-id="{{ product.id }}">
                            ุนุฑุถ ุณุฑูุน
                        </button>
                    </div>
                </div>
                
                <!-- Enhanced Product Info -->
                <div class="product-info-enhanced">
                    <h3 class="product-name-enhanced">
                        <a href="{{ url_for('product_detail', product_id=product.id) }}">{{ product.name }}</a>
                    </h3>
                    <p class="product-brand-enhanced">{{ product.brand }}</p>
                    
                    <!-- Enhanced Rating -->
                    <div class="product-rating-enhanced">
                        <div class="stars">โญโญโญโญโญ</div>
                        <span class="rating-count">({{ (loop.index * 7) % 50 + 10 }})</span>
                    </div>
                    
                    <!-- Enhanced Price Display -->
                    <div class="product-price-enhanced">
                        {% if product.discount > 0 %}
                        <span class="price-original-enhanced">${{ "%.2f"|format(product.price) }}</span>
                        <span class="price-current-enhanced">${{ "%.2f"|format(product.price * (1 - product.discount / 100)) }}</span>
                        <div class="savings-badge">ููุฑ ${{ "%.2f"|format(product.price * product.discount / 100) }}</div>
                        {% else %}
                        <span class="price-current-enhanced">${{ "%.2f"|format(product.price) }}</span>
                        {% endif %}
                    </div>
                    
                    <!-- Enhanced Product Actions -->
                    <div class="product-actions-enhanced">
                        <form action="{{ url_for('add_to_cart') }}" method="POST" class="add-to-cart-form">
                            <input type="hidden" name="product_id" value="{{ product.id }}">
                            <div class="quantity-selector-enhanced">
                                <button type="button" class="qty-btn minus">-</button>
                                <input type="number" name="quantity" value="1" min="1" max="{{ product.stock }}" class="qty-input-enhanced">
                                <button type="button" class="qty-btn plus">+</button>
                            </div>
                            <button type="submit" class="btn btn-enhanced btn-primary-enhanced btn-cart-enhanced">
                                <span class="btn-text">ุฃุถู ููุนุฑุจุฉ</span>
                                <span class="btn-icon">๐</span>
                            </button>
                        </form>
                        <button class="btn btn-enhanced btn-outline-enhanced wishlist-btn-enhanced" data-product-id="{{ product.id }}">
                            <span class="wishlist-icon">๐ค</span>
                        </button>
                    </div>
                    
                    <!-- Enhanced Stock Indicator -->
                    <div class="stock-indicator-enhanced {% if product.stock > 10 %}in-stock{% elif product.stock > 0 %}low-stock{% else %}out-stock{% endif %}">
                        {% if product.stock > 10 %}
                            <span class="stock-icon">โ</span>
                            <span>ูุชููุฑ</span>
                        {% elif product.stock > 0 %}
                            <span class="stock-icon">โ๏ธ</span>
                            <span>ุจุงูู {{ product.stock }} ูุทุน</span>
                        {% else %}
                            <span class="stock-icon">โ</span>
                            <span>ููุฏ ุงููุฎุฒูู</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Enhanced Load More Button -->
        <div class="load-more-section">
            <button class="btn btn-enhanced btn-outline-enhanced btn-large load-more-btn">
                ุนุฑุถ ุงููุฒูุฏ ูู ุงูููุชุฌุงุช
                <span class="btn-icon">โฌ๏ธ</span>
            </button>
        </div>
    </div>
</section>

<!-- Enhanced Deals Section with Advanced Animations -->
<section class="deals-section-enhanced" id="deals">
    <div class="container">
        <div class="section-header-enhanced">
            <h2 class="section-title-enhanced">๐ฅ ุนุฑูุถ ูููุฒุฉ</h2>
            <p class="section-subtitle-enhanced">ุนุฑูุถ ูุญุฏูุฏุฉ ุงูููุช ูุง ุชููุชูุง</p>
            <div class="countdown-timer">
                <div class="timer-box">
                    <span class="timer-number" id="hours">12</span>
                    <span class="timer-label">ุณุงุนุฉ</span>
                </div>
                <div class="timer-box">
                    <span class="timer-number" id="minutes">45</span>
                    <span class="timer-label">ุฏูููุฉ</span>
                </div>
                <div class="timer-box">
                    <span class="timer-number" id="seconds">30</span>
                    <span class="timer-label">ุซุงููุฉ</span>
                </div>
            </div>
        </div>
        
        <div class="deals-carousel-enhanced">
            <div class="deals-grid-enhanced">
                {% for product in discounted_products %}
                <div class="deal-card deal-card-enhanced" data-animate="slideInRight" style="animation-delay: {{ loop.index * 0.2 }}s">
                    <!-- Enhanced Deal Badge -->
                    <div class="deal-badge-enhanced">
                        <span class="discount-percentage">{{ product.discount }}%</span>
                        <span class="discount-text">ุฎุตู</span>
                    </div>
                    
                    <!-- Enhanced Deal Image -->
                    <div class="deal-image-enhanced">
                        <div class="skeleton skeleton-card"></div>
                        <span class="product-placeholder-enhanced">๐ฆ</span>
                        <div class="deal-overlay">
                            <div class="deal-timer">
                                <span class="timer-icon">โฐ</span>
                                <span class="timer-text">ููุชูู ูุฑูุจุงู</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Enhanced Deal Info -->
                    <div class="deal-info-enhanced">
                        <h3 class="deal-name-enhanced">{{ product.name }}</h3>
                        <p class="deal-brand">{{ product.brand }}</p>
                        
                        <div class="deal-prices-enhanced">
                            <span class="price-original-enhanced">${{ "%.2f"|format(product.price) }}</span>
                            <span class="price-deal-enhanced">${{ "%.2f"|format(product.price * (1 - product.discount / 100)) }}</span>
                        </div>
                        
                        <div class="deal-savings-enhanced">
                            <span class="savings-icon">๐ฐ</span>
                            <span>ููุฑ ${{ "%.2f"|format(product.price * product.discount / 100) }}</span>
                        </div>
                        
                        <!-- Enhanced Deal Actions -->
                        <form action="{{ url_for('add_to_cart') }}" method="POST" class="deal-form-enhanced add-to-cart-form">
                            <input type="hidden" name="product_id" value="{{ product.id }}">
                            <input type="hidden" name="quantity" value="1">
                            <button type="submit" class="btn btn-enhanced btn-deal-enhanced">
                                <span class="btn-text">ุงุญุตู ุนูู ุงูุนุฑุถ</span>
                                <span class="btn-icon">๐</span>
                            </button>
                        </form>
                        
                        <!-- Stock Urgency -->
                        <div class="stock-urgency">
                            <div class="urgency-bar">
                                <div class="urgency-fill" style="width: {{ (product.stock / 20 * 100)|round }}%"></div>
                            </div>
                            <span class="urgency-text">ุจุงูู {{ product.stock }} ูุทุนุฉ ููุท!</span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- Carousel Navigation -->
            <div class="carousel-nav">
                <button class="nav-btn prev-btn" aria-label="Previous">โน</button>
                <button class="nav-btn next-btn" aria-label="Next">โบ</button>
            </div>
        </div>
    </div>
</section>

<!-- Enhanced Features Section -->
<section class="features-section-enhanced">
    <div class="container">
        <div class="features-grid-enhanced">
            <div class="feature-card feature-card-enhanced" data-animate="zoomIn" style="animation-delay: 0.2s">
                <div class="feature-icon-enhanced">๐</div>
                <h3 class="feature-title-enhanced">ุชูุตูู ูุฌุงูู</h3>
                <p class="feature-text-enhanced">ุชูุตูู ูุฌุงูู ุนูู ุงูุทูุจุงุช ุฃูุซุฑ ูู $50</p>
                <div class="feature-highlight">ุณุฑูุน ูุขูู</div>
            </div>
            <div class="feature-card feature-card-enhanced" data-animate="zoomIn" style="animation-delay: 0.4s">
                <div class="feature-icon-enhanced">๐</div>
                <h3 class="feature-title-enhanced">ุชูุตูู ูู ููุณ ุงูููู</h3>
                <p class="feature-text-enhanced">ุงุทูุจ ูุจู ุงูุณุงุนุฉ 2 ุธูุฑุงู ููุชูุตูู ูู ููุณ ุงูููู</p>
                <div class="feature-highlight">ุฎุฏูุฉ ุณุฑูุนุฉ</div>
            </div>
            <div class="feature-card feature-card-enhanced" data-animate="zoomIn" style="animation-delay: 0.6s">
                <div class="feature-icon-enhanced">๐ฅฌ</div>
                <h3 class="feature-title-enhanced">ุถูุงู ุงูุทุฒุงุฌุฉ</h3>
                <p class="feature-text-enhanced">100% ุทุงุฒุฌ ุฃู ุงุณุชุฑุฏุงุฏ ุงููุงู</p>
                <div class="feature-highlight">ุฌูุฏุฉ ูุถูููุฉ</div>
            </div>
            <div class="feature-card feature-card-enhanced" data-animate="zoomIn" style="animation-delay: 0.8s">
                <div class="feature-icon-enhanced">๐ณ</div>
                <h3 class="feature-title-enhanced">ุฏูุน ุขูู</h3>
                <p class="feature-text-enhanced">ูุฏููุนุงุช ุขููุฉ ุนุจุฑ ุงูุฅูุชุฑูุช</p>
                <div class="feature-highlight">ุญูุงูุฉ ูุงููุฉ</div>
            </div>
        </div>
    </div>
</section>

<!-- Enhanced Newsletter Section -->
<section class="newsletter-section-enhanced">
    <div class="container">
        <div class="newsletter-content-enhanced">
            <div class="newsletter-text-enhanced" data-animate="fadeInLeft">
                <h2 class="newsletter-title-enhanced">ุงุจู ุนูู ุชูุงุตู ูุน ูุฑูุด ูุงุฑุช</h2>
                <p class="newsletter-subtitle-enhanced">ุงุญุตู ุนูู ุนุฑูุถ ุฃุณุจูุนูุฉ ูุชุญุฏูุซุงุช ุงูููุชุฌุงุช ุงูุทุงุฒุฌุฉ</p>
                <div class="newsletter-benefits">
                    <div class="benefit-item">โ ุนุฑูุถ ุญุตุฑูุฉ</div>
                    <div class="benefit-item">โ ููุชุฌุงุช ุฌุฏูุฏุฉ</div>
                    <div class="benefit-item">โ ูุตุงุฆุญ ุงูุทุจุฎ</div>
                </div>
            </div>
            <form class="newsletter-form-enhanced" data-animate="fadeInRight">
                <div class="input-group-enhanced">
                    <input type="email" placeholder="ุฃุฏุฎู ุนููุงู ุจุฑูุฏู ุงูุฅููุชุฑููู" class="newsletter-input-enhanced input-enhanced focus-enhanced" required>
                    <button type="submit" class="btn btn-enhanced btn-primary-enhanced newsletter-btn-enhanced">
                        <span class="btn-text">ุงุดุชุฑู</span>
                        <span class="btn-icon">๐ง</span>
                    </button>
                </div>
                <p class="newsletter-privacy">ูุญุชุฑู ุฎุตูุตูุชู ููู ูุฑุณู ูู ุฑุณุงุฆู ุบูุฑ ูุฑุบูุจ ูููุง</p>
            </form>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/enhancements.js') }}"></script>
<script>
// Enhanced page-specific animations
document.addEventListener('DOMContentLoaded', function() {
    // Countdown Timer
    function updateCountdown() {
        const now = new Date().getTime();
        const endTime = now + (12 * 60 * 60 * 1000) + (45 * 60 * 1000) + (30 * 1000); // 12:45:30 from now
        
        setInterval(() => {
            const currentTime = new Date().getTime();
            const timeLeft = endTime - currentTime;
            
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        }, 1000);
    }
    
    updateCountdown();
    
    // Wishlist functionality
    document.querySelectorAll('.wishlist-btn-enhanced').forEach(btn => {
        btn.addEventListener('click', function() {
            const icon = this.querySelector('.wishlist-icon');
            if (icon.textContent === '๐ค') {
                icon.textContent = 'โค๏ธ';
                this.classList.add('active');
                window.freshMartEnhancements.showEnhancedToast('ุชู ุฅุถุงูุฉ ุงูููุชุฌ ููููุถูุฉ', 'success');
            } else {
                icon.textContent = '๐ค';
                this.classList.remove('active');
                window.freshMartEnhancements.showEnhancedToast('ุชู ุฅุฒุงูุฉ ุงูููุชุฌ ูู ุงูููุถูุฉ', 'info');
            }
        });
    });
    
    // Carousel functionality
    const carousel = document.querySelector('.deals-grid-enhanced');
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    
    if (carousel && prevBtn && nextBtn) {
        prevBtn.addEventListener('click', () => {
            carousel.scrollBy({ left: -300, behavior: 'smooth' });
        });
        
        nextBtn.addEventListener('click', () => {
            carousel.scrollBy({ left: 300, behavior: 'smooth' });
        });
    }
});
</script>
{% endblock %}